# T-Bank Logo Detector

REST API сервис для детекции логотипа Т-Банка на изображениях с использованием YOLO модели.

## Описание

Сервис предоставляет API для обнаружения логотипа Т-Банка на загружаемых изображениях и возвращает координаты найденных логотипов. Включает веб-интерфейс для загрузки изображений и видео.

## Технические детали

- **Модель**: YOLO (ultralytics) с весами roboflow_model.pt
- **Параметры детекции**: confidence=0.25, iou=0.01
- **Поддерживаемые форматы**: JPEG, PNG, BMP, WEBP
- **Время обработки**: до 10 секунд на изображение
- **Порт**: 8000

## API Endpoints

### POST /detect
Детекция логотипа на изображении (только координаты)

**Параметры:**
- `file`: Загружаемое изображение

**Ответ:**
```json
{
  "detections": [
    {
      "bbox": {
        "x_min": 100,
        "y_min": 50,
        "x_max": 200,
        "y_max": 150
      }
    }
  ]
}
```

### POST /detect_with_image
Детекция логотипа с возвратом изображения с отрисованными боксами

**Параметры:**
- `file`: Загружаемое изображение

**Ответ:**
```json
{
  "detections": [...],
  "image": "base64_encoded_image"
}
```

### GET /
Веб-интерфейс для загрузки изображений и видео

## Запуск через Docker

### Сборка образа
```bash
docker build -t tbank-logo-detector .
```

### Запуск контейнера
```bash
docker run -p 8000:8000 tbank-logo-detector
```

### Отправка на Docker Hub
```bash
# Тегирование
docker tag tbank-logo-detector yourusername/tbank-logo-detector:latest

# Отправка
docker push yourusername/tbank-logo-detector:latest
```

## Локальный запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Запустите сервис:
```bash
python main.py
```

3. Откройте http://localhost:8000 в браузере

## Структура проекта

```
├── main.py              # FastAPI приложение
├── requirements.txt     # Python зависимости
├── Dockerfile          # Docker конфигурация
├── roboflow_model.pt   # Веса модели YOLO
└── README.md           # Документация
```

## Обработка ошибок

Сервис обрабатывает следующие типы ошибок:
- Неверный формат файла
- Ошибки обработки изображения
- Ошибки детекции модели
- Ошибки сервера

## Производительность

- Время обработки изображения: 1-3 секунды
- Поддержка GPU (при наличии)
- Обработка видео по 3-секундным батчам
